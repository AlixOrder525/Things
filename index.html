<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Discord Mini Browser</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #1e1f22;
  color: white;
}

.toolbar {
  display: flex;
  padding: 10px;
  background: #2b2d31;
  gap: 8px;
  align-items: center;
}

button {
  background: #5865F2;
  border: none;
  padding: 8px 12px;
  color: white;
  border-radius: 6px;
  cursor: pointer;
}

button:hover {
  background: #4752c4;
}

input {
  flex: 1;
  padding: 8px;
  border-radius: 6px;
  border: none;
}

.main {
  text-align: center;
  margin-top: 120px;
}

h1 {
  color: #5865F2;
}
</style>
</head>

<body>

<div class="toolbar">
  <button onclick="goBack()">‚¨Ö</button>
  <button onclick="goForward()">‚û°</button>
  <button onclick="reloadPage()">‚ü≥</button>

  <input id="url" placeholder="Search or enter website">
  <button onclick="openSite()">Go</button>
</div>

<div class="main">
  <h1>DuckDuckGo Mini Browser</h1>
  <p>All searches are privacy-friendly and Google-free</p>
</div>

<script>
let historyStack = [];
let currentIndex = -1;

function formatURL(text) {
  text = text.trim().toLowerCase();

  // üö´ Block ALL google domains
  if (text.includes("google.")) {
    return "https://duckduckgo.com/?q=" + encodeURIComponent(text);
  }

  // If full URL typed
  if (text.startsWith("http://") || text.startsWith("https://")) {
    return text;
  }

  // Looks like a website
  if (text.includes(".") && !text.includes(" ")) {
    return "https://" + text;
  }

  // Default: DuckDuckGo search
  return "https://duckduckgo.com/?q=" + encodeURIComponent(text);
}

function openLink(url) {
  const link = document.createElement("a");
  link.href = url;
  link.target = "_blank";
  link.rel = "noopener noreferrer";
  document.body.appendChild(link);
  link.click();
  link.remove();
}

function openSite() {
  const input = document.getElementById("url").value;
  if (!input) return;

  const url = formatURL(input);

  historyStack = historyStack.slice(0, currentIndex + 1);
  historyStack.push(url);
  currentIndex++;

  openLink(url);
}

function goBack() {
  if (currentIndex > 0) {
    currentIndex--;
    openLink(historyStack[currentIndex]);
  }
}

function goForward() {
  if (currentIndex < historyStack.length - 1) {
    currentIndex++;
    openLink(historyStack[currentIndex]);
  }
}

function reloadPage() {
  if (currentIndex >= 0) {
    openLink(historyStack[currentIndex]);
  }
}
</script>

</body>
</html>
